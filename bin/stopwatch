#!/bin/bash

unamestr=`uname`
if [[ "$unamestr" == 'Linux' ]]; then
  showTime () {
    echo -ne " $(date -u --date @$newDate +%H:%M:%S)                   \r"
  }
elif [[ "$unamestr" == 'Darwin' ]]; then
  showTime () {
    echo -ne " $(date -ju -f %s $newDate +%H:%M:%S)                   \r"
  }
fi

if [[ $# -eq 0 ]] ; then
  date1=`date +%s`;
  updateNewDate () {
    newDate=$((`date +%s` - $date1))
  }
else
  date1=$((`date +%s` + $1));
  updateNewDate () {
    newDate=$(($date1 - `date +%s`))
  }
fi

while true; do
  updateNewDate

  if [[ $newDate -lt 0 ]]; then
    exit 0
  fi

  days=$((
    $((
      $newDate * 1
    )) / 86400
  ))
  if [[ $days -gt 0 ]]; then
    printf " $days day(s) and"
  fi

  showTime
  sleep 0.1
done

echo ''
